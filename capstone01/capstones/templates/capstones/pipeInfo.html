<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>하수관 결함 탐지</title>
    {% load static %}

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel = "stylesheet" type ="text/css" href = "{% static 'css/style.css' %}">

</head>

<body>
    <header style="background-image: url('/static/images/background2.png')"></header>

    <main>
        <section  id="page1">
            <div class="pipe_info_pg">
                <h2><i class="bi bi-info-circle"></i> 교체할 하수관의 정보를 입력해주세요 <i class="bi bi-info-circle"></i></h2>       
                <hr>     
                
                <div class="container px-4 px-lg-5">
                    <div class="row gx-4 gx-lg-5 justify-content-center">
                        <div class="col-md-10 col-lg-8 col-xl-7">
                            <form class="pipeInfoForm border border-2 rounded">
                                <div class="row mb-3">                    
                                    <label for="pipeLength" class="col-sm-4 col-form-label">파이프의 총 길이 (m)</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="pipeLength" placeholder="m 단위로 숫자만 입력하세요" >
                                    </div>
                                </div>
        
                                <fieldset class="row mb-3">
                                <legend class="col-form-label col-sm-4 pt-0">하수관 종류</legend>
                                <div class="col-sm-8">
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios1" value="concrete" onclick="addConcreteDiameter();" >
                                    <label class="form-check-label" for="gridRadios1">
                                        콘크리트관
                                    </label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios2" value="steel" onclick="addSteelDiameter();" >
                                    <label class="form-check-label" for="gridRadios2">
                                        강관
                                    </label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios3" value="iron" onclick="addIronDiameter();" >
                                    <label class="form-check-label" for="gridRadios3">
                                        주철관
                                    </label>
                                    </div>
        
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios4" value="plastic" onclick="addPlasticDiameter();" >
                                    <label class="form-check-label" for="gridRadios4">
                                        플라스틱관
                                    </label>
                                    </div>
        
                                </div>
                                </fieldset>

                                <div class="row mb-3">                    
                                    <label for="pipeDiameter" class="col-sm-4 col-form-label">파이프의 관경 (mm)</label>
                                    <div class="col-sm-8">
                                        <select class="pipe-diameter form-select form-select-sm"  id="pipeDiameter" aria-label=".form-select-sm example" >
                                           
                                        
                                          </select>
                                    </div>
                                </div>
                            </form>

                            <button type="button" onclick='calcCost();'>확인1</button>
                            

                            <div class="show_cost_btn">
                                <a href="{% url 'pipeCost' %}" class="btn btn-outline-secondary btn-lg">교체비용 보기</a>
                            </div> 
                        </div>
                    </div>
                </div>
            </div>
        </section>
           
    </main>
    
    <script>
        function show(){
            const length = document.getElementById("pipeLength").value;
            console.log(length);
        }
        function show2(){
            var d = document.getElementById("pipeDiameter");
            var diameter = d.options[d.selectedIndex].value;
            console.log(diameter);
        }
        function show3(){
            var radio = document.getElementsByName('gridRadios');
            radio.forEach((node) => {
                    if(node.checked)  {
                        var result =node.value;
                        console.log(result);
                    }
                }) 
        }
       

        function calcCost(){
            var length = document.getElementById("pipeLength").value;
            
            var radio = document.getElementsByName('gridRadios');
            
            var d = document.getElementById("pipeDiameter");
            var diameter = d.options[d.selectedIndex].value;

            var cost=0;
            
            radio.forEach((node) => {
                if(node.checked)  {
                    var result =node.value;
                    if(result == "concrete"){
                        if(diameter==300){cost = 512740*length;}
                        else if(diameter==400){cost = 580188*length;}
                        else if(diameter==500){cost = 624861*length;}
                        else if(diameter==600){cost = 705821 *length;}
                        else if(diameter==700){cost = 782918 *length;}
                        else if(diameter==800){cost = 854676 *length;}
                        else if(diameter==900){cost = 945775 *length;}
                        else if(diameter==1000){cost = 1051853  *length;}
                        else if(diameter==1100){cost = 1188358  *length;}
                        else if(diameter==1200){cost = 1313909  *length;}
                        else if(diameter==1350){cost = 1519849  *length;}
                    }
                    else if(result == "steel"){
                        if(diameter==300){cost = 707247 *length;}
                        else if(diameter==400){cost = 827275 *length;}
                        else if(diameter==500){cost = 935411 *length;}
                        else if(diameter==600){cost = 1068860 *length;}
                        else if(diameter==700){cost = 1206659*length;}
                        else if(diameter==800){cost = 1373571 *length;}
                        else if(diameter==900){cost = 1509424 *length;}
                        else if(diameter==1000){cost = 1730822 *length;}
                        else if(diameter==1100){cost = 1990647 *length;}
                        else if(diameter==1200){cost = 2234280 *length;}
                    } 
                    else if(result == "iron"){

                    } 
                    else{
                        
                    }

                    // console.log(cost);

                }
            }) 
                console.log(cost);
        }
    </script>
    <script src="{% static 'javascript/pipeDiameter.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>


</body>
</html>

