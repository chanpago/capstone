<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>하수관 결함 탐지</title>
    {% load static %}

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <link rel = "stylesheet" type ="text/css" href = "{% static 'css/style.css' %}">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> 
</head>

<body>
    <header style="background-image: url('/static/images/background2.png')"></header>

    <main>
        <section  id="page1">
            <div class="fileupload_pg">
                <h2><i class="bi bi-images"></i> 검사할 하수도관의 CCTV 이미지파일을 첨부해주세요</h2>       
                <hr>     
                    <!-- 파일 코드 1-->
                <div class="insert">
                    <form method="POST" onsubmit="return false;" enctype="multipart/form-data">
                                      
                        <div class="input-group">
                            <input type="file" class="form-control" accept="image/*" id="inputGroupFile04" onchange="addFile(this);" multiple aria-describedby="inputGroupFileAddon04" aria-label="Upload">
                            <input class="btn btn-outline-secondary"id="inputGroupFileAddon04" type="submit" value="업로드" data-bs-toggle="modal" data-bs-target="#exampleModal">
                        
                            <!-- 업로드 성공 팝업창 -->
                            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                  <div class="modal-content">
                                    <div class="modal-header">
                                      <h5 class="modal-title" id="exampleModalLabel">파일 업로드 성공!</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                      <p>결함 탐지하기 버튼을 클릭해주세요!</p>                                      
                                    </div>
                                    <div class="modal-footer">
                                      <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="activeBtn();">닫기</button>
                                    </div>
                                  </div>
                                </div>
                              </div>
                        </div>
                        <!-- <input type="file" id="input-file" onchange="addFile(this);" multiple /> -->

                        <!-- <input type="file" id="input-file" style = "display:none;" onchange="addFile(this);" multiple /> -->
                    
                        <div class="file-list"></div>
                    </form>
                </div>                           
                    <!-- 2파일 코드2 참고-->
                    <!-- <form action="http://localhost/upload.php" method="post" enctype="multipart/form-data">
                        <input multiple="multiple"  type="file" name="filename[]" />
                        <input type="submit">
                    </form> -->               
                <div class="detect_btn">
                    <a href="{% url 'progress' %}" class="btn btn-outline-secondary btn-lg">결함 탐지하기</a>
                </div>
            </div>
        </section>
    
    </main>
    
    <script>
      $('.btn-outline-secondary').click(function () {return false;});
      
      function activeBtn(){
        $('.btn-outline-secondary').unbind('click');
      }
    </script>
    <script src="{% static 'javascript/fileUpload.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>


</body>
</html>